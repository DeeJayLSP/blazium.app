<!doctype html>
<html lang="en" class="no-js">
<head>
  <base target="_blank">
  <meta charset="UTF-8" />
  <title>Anon Developer</title>
  <link rel="shortcut icon" type="image/png" href="static/assets/favicon.png">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="static/css/style.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css" integrity="sha512-Kc323vGBEqzTmouAECnVceyQqyqdsSiqLQISBL29aUW4U/M7pSPA/gEUZQqv1cwx4OnYxTxve5UMg5GT6L4JJg==" crossorigin="anonymous" referrerpolicy="no-referrer" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/particles.js/2.0.0/particles.min.js" integrity="sha512-Kef5sc7gfTacR7TZKelcrRs15ipf7+t+n7Zh6mKNJbmW+/RRdCW9nwfLn4YX0s2nO6Kv5Y2ChqgIakaC6PW09A==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
  <script type="text/javascript" src="static/js/background.js"></script>

  <style>
    /* General body settings */
    body {
      margin: 0;
      overflow: hidden;
      font-family: Arial, sans-serif;
    }

    /* Full-screen particle container */
    #particles {
      height: 100vh;
      width: 100vw;
      position: relative;
    }

    /* Logo settings */
    #logo {
      position: fixed;
      top: 50px;
      left: 50%;
      transform: translateX(-50%);
      text-align: center;
    }

    /* Responsive logo sizing */
    #logo img {
      width: 250px;
      height: auto;
    }

    /* Intro section settings */
    #intro {
      position: fixed;
      top: 200px;
      left: 50%;
      transform: translateX(-50%);
      text-align: center;
    }

    /* Release info box */
    #release-info {
      position: fixed;
      bottom: 50px;
      left: 50%;
      transform: translateX(-50%);
      background-color: #1e1e1e;
      color: white;
      padding: 20px;
      width: 60%;
      border-radius: 15px;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
      z-index: 10;
    }

    /* Responsive for smaller screens */
    @media (max-width: 768px) {
      #logo img {
        width: 200px;
      }

      #intro {
        top: 150px;
      }

      #release-info {
        width: 80%;
        padding: 15px;
      }
    }

    @media (max-width: 480px) {
      #logo img {
        width: 150px;
      }

      #intro {
        top: 120px;
      }

      #release-info {
        width: 90%;
        padding: 10px;
      }
    }

    /* Styling the hr and links */
    hr {
      width: 50%;
      background-color: #E83951;
      border-color: #E83951;
    }

    a {
      color: white;
    }

    a:hover {
      color: #E83951;
    }
  </style>

</head>

<body>

<div id="particles">
  <!-- Logo Image -->
  <div id="logo">
    <img src="static/assets/logo.png" alt="Blazium Engine Logo">
  </div>

  <!-- Intro Section -->
  <div id="intro">
    <h2 style="font-family: 'Syncopate', sans-serif; font-weight: 10;">Blazium Engine</h2>
    <hr>
    <a href="https://discord.gg/sZaf9KYzDp"><i class="fab fa-discord" style="font-size: 2em;"></i></a>
    &nbsp
    <a href="https://github.com/blazium-engine/blazium"><i class="fab fa-github" style="font-size: 2em;"></i></a>
    &nbsp
    <a href="https://x.com/BlaziumEngine"><i class="fab fa-x-twitter" style="font-size: 2em;"></i></a>
  </div>

  <!-- Release Information Box -->
  <div id="release-info">
    <h3 style="font-family: 'Syncopate', sans-serif; text-align: center;">Blazium Engine Release Info</h3>
    <p id="release-message" style="text-align: center;">Loading release information...</p>
  </div>
</div>

<script>
  // Function to fetch mirrorlist from the API
  function fetchReleaseInfo() {
    const protocol = window.location.protocol;
    const host = window.location.host;
    const apiUrl = `${protocol}//${host}/api/mirrorlist/latest/json`;

    console.log("Fetching from URL:", apiUrl);  // Add this line to check the URL

    fetch(apiUrl)
      .then(response => {
        if (!response.ok) {
          throw new Error('Network response was not ok ' + response.statusText);
        }
        return response.json();
      })
      .then(data => {
        const releaseMessage = document.getElementById('release-message');
        
        if (data.mirrors.length === 0) {
          releaseMessage.innerHTML = 'Release is pending, visit our <a href="https://discord.gg/sZaf9KYzDp" style="color: #E83951;">Discord</a> for more information.';
        } else {
          const mirrors = data.mirrors.map(mirror => `
            <li>
              <a href="${mirror.download_url}" style="color: #E83951;">Download</a> |
              SHA256: ${mirror.sha} |
              Release Date: ${mirror.release_date}
            </li>
          `).join('');
          
          releaseMessage.innerHTML = `
            <ul style="list-style: none; padding-left: 0; text-align: center;">
              ${mirrors}
            </ul>
          `;
        }
      })
      .catch(error => {
        console.error('Error fetching release information:', error);
        document.getElementById('release-message').innerHTML = 'Error fetching release information. Please try again later.';
      });
  }

  // Call the function to fetch the release info when the page loads
  window.onload = fetchReleaseInfo;
</script>

</body>
</html>
